extends /layouts/application.pug

block content
    .container.align-content-center.justify-content-center
        .py-4
            h2.text-center Task details
    .container.col-4.mt-4
        +smallField({ label: 'Task ID', value: formatId(task.id, 6) })
        +smallField({ label: 'Status', value: task.status })
        +smallField({ label: 'Title', value: task.name })
        +smallField({ label: 'Tags', value: task.tags })
        +smallField({ label: 'Created at', value: formatDate(task.createdAt) })
        +smallField({ label: 'Created by', value: task.creator })
        +smallField({ label: 'Assigned to', value: task.assignedTo })
        +bigField({ label: 'Description', value: task.description })
        .row.form-group.mt-5
            .col-6
                form(action=urlFor('task#edit', {id: task.id}) method='get')
                    button.btn.btn-block.btn-warning(type='submit') Edit task
            .col-6
                form(action=urlFor('task#destroy', {id: task.id}) method='post')
                    button.btn.btn-block.btn-danger(type='submit' name='_method' value='delete') Delete task

    form(action=urlFor('tasks#update', {id: task.id}), method='post')
        - const value = f.object[property] === undefined ? '' : f.object[property]
        .form-group(class=(f.errors[property] && 'has-danger'))
            select(name='statusId' class='form-control' value=`${value}`)
                option(selected= 1) Change status
                each status in statuses
                    option(value= status.id)= status.name
            input(type='hidden' name='_method' value='PATCH')
            input(type='hidden' name='taskId' value= task.id)
            button.btn.btn-block Update Status